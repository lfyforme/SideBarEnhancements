<script src="/static/index/js/jquery-3.3.1.min.js"></script>
<script src="/static/index/js/bootstrap.min.js"></script>
<script src="/static/layui/layui.js"></script>
<script>

    layui.use('form', function () {
        var form = layui.form;
    });
    function layer_show(title,url,w,h){
        if (title == null || title == '') {
            title=false;
        };
        if (url == null || url == '') {
            url="404.html";
        };
        if (w == null || w == '') {
            w=800;
        };
        if (h == null || h == '') {
            h=($(window).height() - 50);
        };
        layui.use('layer',function () {
            var layer = layui.layer;
            layer.open({
                type: 2,
                area: [w+'px', h +'px'],
                fix: false, //不固定
                maxmin: false,
                shade:0.4,
                scrollbar: false,
                title: title,
                content: url,
            });
        })
    }

    $(function () {
        layui.use('layer',function () {
            var layer = layui.layer;
            $('#createQ').click(function () {
                var id = $('#ID').val();
                if(id=="") {
                    layer.confirm('您还没登录,请先登录', {
                        title: '登录请求',
                        icon: 5
                    }, function (index) {
                        layer.close(index);
                        alert(id);
                        location.href = "{:url('index/index/login')}";
                    })
                }else{
                    location.href="{:url('index/index/Base')}";
                }
                return false;
            });
            $('#home').click(function () {
                var $id = $('#ID').val();
                if($id=="") {
                    layer.confirm('您还没登录,请先登录', {
                        title: '登录请求',
                        icon: 5
                    }, function (index) {
                        layer.close(index);
                        location.href = "{:url('index/index/login')}";
                        return "1"
                    })
                }else{
                    location.href="{:url('index/Survey/s_list')}";
                }
                return false;
            });
            $('#login').click(function () {
                $.ajax({
                    url:"{:url('index/index/login')}",
                    type:'POST',
                    data:$('form').serialize(),
                    dataType:'json',
                    success:function (data) {
                        if(data.code == 1){
                            layer.msg(data.msg,{
                                icon:6,
                                time:2000
                            },function () {
                                location.href = data.url;
                            })
                        }else{
                            layer.msg(data.msg,{
                                icon:5,
                                time:2000
                            })

                        }
                    },
                });
                return false;
            });
            $('#register').click(function () {
                $.ajax({
                    url:"{:url('index/index/register')}",
                    type:'POST',
                    data:$('form').serialize(),
                    dataType:'json',
                    success:function (data) {
                        if(data.code == 1){
                            layer.msg(data.msg,{
                                icon:6,
                                time:2000
                            },function () {
                                location.href = data.url;
                            })
                        }else if(data.code == 0){
                            layer.open({
                                title:'注册信息',
                                content:data.msg,
                                icon:5,
                                anim:6
                            });
                        }
                    },
                });
                return false;
            })
            $('#loginout').click(function () {
                $.ajax({
                    url: "{:url('index/index/loginout')}",
                    type: 'POST',
                    dataType: 'json',
                    success: function (data) {
                        if (data.code == 1) {
                            layer.msg(data.msg, {
                                icon: 6,
                                time: 2000
                            }, function () {
                                location.href = data.url;
                            })
                        } else{
                            layer.open({
                                title: '退出失败',
                                content: data.msg,
                                icon: 5,
                                anim: 6
                            });
                        }
                    },
                });
            });
            $('#forget').click(function () {
                $.ajax({
                    url: "{:url('index/index/forget')}",
                    type: 'POST',
                    data: $('form').serialize(),
                    dataType: 'json',
                    success: function (data) {
                        if (data.code == 1) {
                            layer.msg(data.msg, {
                                icon: 6,
                                time: 2000
                            }, function () {
                                location.href = data.url;
                            })
                        } else if (data.code == 0) {
                            layer.open({
                                title: '重置信息',
                                content: data.msg,
                                icon: 5,
                                anim: 6
                            });
                        }
                    },
                });
                return false;
            })
        })

    })
</script>