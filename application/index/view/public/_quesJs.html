<script src="/static/index/js/jquery-3.3.1.min.js"></script>
<script src="/static/index/js/bootstrap.min.js"></script>
<script src="/static/layui/layui.js"></script>
<script>
    var layer;
    layui.use('layer', function () {
        layer = layui.layer;
    })

    function deleteInput(obj) {
        $(obj).parent().remove();
    }


    // function dataArray(name, list) {
    //     $("input[name=" + name + "]").each(
    //         function () {
    //             list.push($(this).val());
    //         }
    //     )
    // }
    // function saveInfo(obj, surId, url, flag, flagRec) {
    //     var quesId = document.getElementById('quesId').value;
    //     var quesTitle = document.getElementById('title').value;
    //     var quesDesc = document.getElementById('desc').value;
    //     var question_type = document.getElementById('question_type').value;
    //     var question_check = document.getElementById('question_check').value;
    //     var list = [];
    //     var listId = [];
    //     var listIn = [];
    //     var listInId = [];
    //     dataArray('option', list);
    //     dataArray('optionId', listId);
    //     dataArray('inner', listIn);
    //     dataArray('innerId', listInId);
    //     var data = {
    //         options: JSON.stringify(list), listId: JSON.stringify(listId),
    //         inners: JSON.stringify(listIn), listInId: JSON.stringify(listInId),
    //         quesId: quesId, quesTitle: quesTitle, quesDesc: quesDesc,
    //         question_type: question_type, question_check: question_check, surId: surId,
    //     };
    //     if (flag == '1') {
    //         var scale_type = document.getElementById('scale_type').value;
    //         var scaleRange = document.getElementById('scaleRange').value;
    //         var scaleStart = document.getElementById('scaleStart').value;
    //         data['scale_type'] = scale_type;
    //         data['scaleRange'] = scaleRange;
    //         data['scaleStart'] = scaleStart;
    //     }
    //
    //     if (flagRec == "1" && listIn.length == 0) {
    //         layer.msg('问题不能为空', {
    //             icon: 5,
    //             time: 2000
    //         })
    //     } else if (list.length == 0) {
    //         layer.msg('选项不能为空', {
    //             icon: 5,
    //             time: 2000
    //         })
    //     } else if (quesTitle == "") {
    //         document.getElementById('title').focus();
    //         document.getElementById('title').style = "border:1px solid red";
    //     } else {
    //         $.ajax({
    //             url: url,
    //             data: data,
    //             dataType: 'json',
    //             type: 'post',
    //             success: function (data) {
    //                 if (data.code == 1) {
    //                     layer.msg(data.msg, {
    //                         icon: 6,
    //                         time: 2000
    //                     }, function () {
    //                         var index = parent.layer.getFrameIndex(window.name);
    //                         window.parent.location.reload();
    //                         parent.layer.close(index);
    //                     })
    //                 } else {
    //                     layer.open({
    //                         content: data.msg,
    //                         icon: 5,
    //                         anim: 6
    //                     })
    //                 }
    //             },
    //         })
    //     }
    // }

    function link(id) {
        layer_show_id('题目跳转', "{:url('index/question/link')}", '608', '604', id.value, 'link');
    }

    $(function () {
        $('.input-add').click(function () {
            var node = document.createElement("LI");
            node.innerHTML = "<span class=\"Hui-iconfont\">&#xe6c6;<input name=\"option\" type=\"text\" contenteditable=\"true\" value=\"选项\">" +
                " <input type=\"hidden\" value=\"1\" name=\"optionId\"><a\n" +
                "                            href=\"javascript:;\" onclick=\"deleteInput(this)\">×</a></span>";
            document.getElementById('options').appendChild(node);
        })
        $('.input-add2').click(function () {
            var node = document.createElement("LI");
            node.innerHTML = "<span class=\"Hui-iconfont\">&#xe6c6;<input name=\"inner\" type=\"text\" contenteditable=\"true\" value=\"问题\">" +
                " <input type=\"hidden\" value=\"1\" name=\"innerId\"><a\n" +
                "                            href=\"javascript:;\" onclick=\"deleteInput(this)\">×</a></span>";
            document.getElementById('inner').appendChild(node);
        })
    })

    // 取消
    function cancelInfo(obj) {
        var index = parent.layer.getFrameIndex(window.name);
        window.parent.location.reload();
        parent.layer.close(index);
    }

    function layer_show_id(title, url, w, h, id, split, surId) {
        url = url.split(split)[0] + split + '/id/' + id + '/surId/' + surId + '.html';
        if (title == null || title == '') {
            title = false;
        }
        ;
        if (url == null || url == '') {
            url = "404.html";
        }
        ;
        if (w == null || w == '') {
            w = 800;
        }
        ;
        if (h == null || h == '') {
            h = ($(window).height() - 50);
        }
        ;
        layui.use('layer', function () {
            var layer = layui.layer;
            layer.open({
                type: 2,
                area: [w + 'px', h + 'px'],
                fix: false, //不固定
                maxmin: false,
                shade: 0.4,
                scrollbar: false,
                title: title,
                content: url,
            });

        })
    }
</script>